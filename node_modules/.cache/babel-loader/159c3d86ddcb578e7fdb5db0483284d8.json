{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\elkin\\\\OneDrive\\\\Escritorio\\\\2. C\\xF3digo\\\\Codigo_v1.2\\\\frontend\\\\src\\\\pages\\\\AssignationCourseToProfessor.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Assignation from '../components/FormAssignationCourseToProfessor';\nimport Cookies from 'universal-cookie/es6';\nimport NavbarAdmin from '../components/NavbarAdmin';\nimport { getProfessorsByLevel, updateCoursesProfessor, getProfessorById } from '../services/professorService';\nimport { getCourseByNevel } from '../services/courseService';\nimport { breadcrumbsClasses } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst cookies = new Cookies();\n\nconst AssignationCourseToProfessor = () => {\n  _s();\n\n  const [professors, setProfessors] = useState([]);\n  const [courses, setCourses] = useState([]);\n  const [professor, setProfessor] = useState({\n    bornYear: \"\",\n    disponibility: 2,\n    email: \"\",\n    idCard: \"\",\n    idCourse: [],\n    idSubject: \"\",\n    lastName: \"\",\n    level: \"\",\n    name: \"\",\n    password: \"\",\n    specialization: \"\",\n    user: \"\",\n    _id: \"\"\n  });\n  const [level, setLevel] = useState(\"\");\n  const [id, setId] = useState(\"\");\n  useEffect(() => {\n    async function loadProfessors() {\n      const response = await getProfessorsByLevel(level);\n\n      if (response.status === 200) {\n        setProfessors(response.data);\n      }\n\n      ;\n    }\n\n    ;\n    loadProfessors();\n  }, [level]);\n  useEffect(() => {\n    const coursesArray = [];\n    const newArray = courses;\n    const newCourses = [];\n\n    async function findProfessor() {\n      const response = await getProfessorById(id);\n\n      if (response.status === 200) {\n        setProfessor(response.data);\n        response.data.idCourse.forEach(course => {\n          courses.forEach(c => {\n            if (c._id === course) {\n              coursesArray.push(c);\n            }\n          });\n        });\n      }\n\n      ;\n\n      for (var i = 0; i < newArray.length; i++) {\n        if (coursesArray.includes(newArray[i]) === false) {\n          newCourses.push(newArray[i]);\n        }\n      }\n\n      setCourses(newCourses);\n    }\n\n    ;\n    findProfessor();\n  }, [id]);\n  useEffect(() => {\n    async function loadCourses() {\n      const response = await getCourseByNevel(level);\n\n      if (response.status === 200) {\n        var courses = [];\n        console.log(professor);\n\n        for (var i = 0; i < response.data.length; i++) {\n          /*if (professor.disponibility === 1) {\r\n              var auxBool = true;\r\n              for (var j=0; j<professor.idCourse.length; j++) {\r\n                  if (professor.idCourse[j] === response.data[i]._id) {\r\n                      auxBool = false;\r\n                  }\r\n              }\r\n                if (auxBool === true && response.data[i].idSchoolYear !== \"\") {\r\n                  courses.push(response.data[i]);\r\n              }\r\n            }else {*/\n          if (response.data[i].idSchoolYear !== \"\") {\n            courses.push(response.data[i]);\n          } //}\n\n        }\n\n        setCourses(courses);\n      }\n\n      ;\n    }\n\n    ;\n    loadCourses();\n  }, [level]);\n  useEffect(() => {\n    if (typeof cookies.get('user') === 'undefined' || cookies.get('type', {\n      path: \"/\"\n    }) !== '0') {\n      window.location.href = \"./\";\n    }\n  });\n\n  const handleUpdate = (professorData, setProfessorData) => {\n    updateCoursesProfessor(professorData, setProfessorData);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavbarAdmin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 32\n    }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n      children: /*#__PURE__*/_jsxDEV(Assignation, {\n        professors: professors,\n        courses: courses,\n        setLevel: setLevel,\n        id: id,\n        setId: setId,\n        setProfessor: setProfessor,\n        professor: professor,\n        handleUpdate: handleUpdate,\n        setCourses: setCourses\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AssignationCourseToProfessor, \"dvY3eKpr4OgpMjvLHcQa9RcYwts=\");\n\n_c = AssignationCourseToProfessor;\nexport default AssignationCourseToProfessor;\n\nvar _c;\n\n$RefreshReg$(_c, \"AssignationCourseToProfessor\");","map":{"version":3,"sources":["C:/Users/elkin/OneDrive/Escritorio/2. CÃ³digo/Codigo_v1.2/frontend/src/pages/AssignationCourseToProfessor.js"],"names":["React","useState","useEffect","Assignation","Cookies","NavbarAdmin","getProfessorsByLevel","updateCoursesProfessor","getProfessorById","getCourseByNevel","breadcrumbsClasses","cookies","AssignationCourseToProfessor","professors","setProfessors","courses","setCourses","professor","setProfessor","bornYear","disponibility","email","idCard","idCourse","idSubject","lastName","level","name","password","specialization","user","_id","setLevel","id","setId","loadProfessors","response","status","data","coursesArray","newArray","newCourses","findProfessor","forEach","course","c","push","i","length","includes","loadCourses","console","log","idSchoolYear","get","path","window","location","href","handleUpdate","professorData","setProfessorData"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport Assignation from '../components/FormAssignationCourseToProfessor';\r\nimport Cookies from 'universal-cookie/es6';\r\nimport NavbarAdmin from '../components/NavbarAdmin';\r\nimport { getProfessorsByLevel, updateCoursesProfessor, getProfessorById } from '../services/professorService';\r\nimport { getCourseByNevel } from '../services/courseService'\r\nimport { breadcrumbsClasses } from '@mui/material';\r\n\r\nconst cookies = new Cookies();\r\n\r\nconst AssignationCourseToProfessor = () => {\r\n    const [ professors, setProfessors ] = useState([]);\r\n    const [ courses, setCourses ] = useState([]);\r\n    const [ professor, setProfessor ] = useState({\r\n        bornYear: \"\",\r\n        disponibility: 2,\r\n        email: \"\",\r\n        idCard: \"\",\r\n        idCourse: [],\r\n        idSubject: \"\",\r\n        lastName: \"\",\r\n        level: \"\",\r\n        name: \"\",\r\n        password: \"\",\r\n        specialization: \"\",\r\n        user: \"\",\r\n        _id: \"\"\r\n    });\r\n    const [ level, setLevel ] = useState(\"\");\r\n    const [ id, setId ] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        async function loadProfessors() {\r\n            const response = await getProfessorsByLevel(level);\r\n            if (response.status === 200) {\r\n                setProfessors(response.data);\r\n            };\r\n        };\r\n        loadProfessors();\r\n    }, [level]);\r\n    \r\n    useEffect(() => {\r\n        const coursesArray = []\r\n        const newArray = courses;\r\n        const newCourses = [];\r\n\r\n        async function findProfessor() {\r\n            const response = await getProfessorById(id);\r\n            if (response.status === 200){\r\n                setProfessor(response.data); \r\n                response.data.idCourse.forEach(course => {\r\n                    courses.forEach(c => {\r\n                        if(c._id === course){\r\n                            coursesArray.push(c)\r\n                        }\r\n                    })\r\n                })\r\n            }; \r\n            for(var i = 0; i < newArray.length; i++){\r\n                if(coursesArray.includes(newArray[i]) === false){\r\n                    newCourses.push(newArray[i])\r\n                }\r\n            }\r\n            setCourses(newCourses)\r\n        };\r\n        \r\n        findProfessor();     \r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        async function loadCourses() {\r\n            const response = await getCourseByNevel(level);\r\n            \r\n            if (response.status === 200) {\r\n                var courses = [];\r\n                console.log(professor)\r\n                for (var i=0; i<response.data.length; i++) {\r\n                    /*if (professor.disponibility === 1) {\r\n                        var auxBool = true;\r\n                        for (var j=0; j<professor.idCourse.length; j++) {\r\n                            if (professor.idCourse[j] === response.data[i]._id) {\r\n                                auxBool = false;\r\n                            }\r\n                        }\r\n\r\n                        if (auxBool === true && response.data[i].idSchoolYear !== \"\") {\r\n                            courses.push(response.data[i]);\r\n                        }\r\n\r\n                    }else {*/\r\n                        if (response.data[i].idSchoolYear !== \"\") {\r\n                            courses.push(response.data[i]);\r\n                        }\r\n                    //}\r\n                        \r\n                }\r\n\r\n                setCourses(courses);\r\n            };\r\n        };\r\n\r\n        loadCourses();\r\n    }, [level]);\r\n\r\n    useEffect(() => {\r\n        if (typeof cookies.get('user') === 'undefined' || cookies.get('type', {path: \"/\"}) !== '0') {\r\n            window.location.href = \"./\";\r\n        }\r\n    });\r\n\r\n    const handleUpdate = (professorData, setProfessorData) => {\r\n        updateCoursesProfessor(professorData, setProfessorData);\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <NavbarAdmin/><br/><br/>\r\n            <center>\r\n                <Assignation professors={professors} courses={courses} setLevel={setLevel}\r\n                id={id} setId={setId} setProfessor = {setProfessor} professor={professor} \r\n                handleUpdate={handleUpdate} setCourses={setCourses}/>\r\n            </center>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AssignationCourseToProfessor;"]},"metadata":{},"sourceType":"module"}